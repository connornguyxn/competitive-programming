#ifdef local_debug
#include "include/debugging.h"
#else
#include <bits/stdc++.h>
#define vdb(...)
#define db(...)
#endif
using namespace std;
#define ll long long
#define ull unsigned long long
#define ld long double
#define str string
#define nl '\n'
#define sp ' '
#define all(a) a.begin(), a.end()
#define dec_point(n) fixed << showpoint << setprecision(n)
#define mp_optimize(mp) mp.reserve(4096); mp.max_load_factor(0.1);
#define for_in(i, a) for (auto& i : a)
const int LIM = 1e6;
const ull MOD = 1e9 + 7;

// https://oj.vnoi.info/problem/segtree_itlazy
// segtree

///////////////////////////////////////
vector<ll> t(LIM * 10), lz(LIM * 10);
int n;

void push(int v) {
    // update the child nodes
    t[v * 2] += lz[v];
    t[v * 2 + 1] += lz[v];
    // push buffer to child node
    lz[v * 2] += lz[v];
    lz[v * 2 + 1] += lz[v];
    // delete current node buffer
    lz[v] = 0;
};

void update(int l, int r, ll val, int tl, int tr, int v = 1) {
    if (l > r) return; // if out of range then break
    if (tl == l && r == tr) { // if this node contains all of update range
        // update this node only
        t[v] += val;
        // delay update of child nodes
        lz[v] += val;
    } else {
        // push update to child nodes
        push(v);
        // continue down child nodes
        int tm = (tl + tr) / 2;
        update(l, min(r, tm), val, tl, tm, v * 2);
        update(max(l, tm + 1), r, val, tm + 1, tr, v * 2 + 1);
        t[v] = max(t[v * 2], t[v * 2 + 1]);
    };
};

ll query(int l, int r, int tl, int tr, int v = 1) {
    if (l > r) { // if out of range then return default value
        return -INFINITY;
    };
    if (l <= tl && tr <= r) { // if this node fits in query range
        // return this node
        return t[v];
    };
    // push update to child nodes
    push(v);
    // continue down child nodes
    int tm = (tl + tr) / 2;
    ll lq = query(l, min(r, tm), tl, tm, v * 2);
    ll rq = query(max(l, tm + 1), r, tm + 1, tr, v * 2 + 1);
    // compare and return value of child nodes
    return max(lq, rq);
};

///////////////////////////////////////
int main() {
    // ifstream cin("_input");
    // ofstream cout("_output");
    cin.tie(0) -> sync_with_stdio(0);
    /////////////////
    cin >> n;
    ll a;
    for (int i = 0; i < n; i++) {
        cin >> a;
        update(i, i, a, 0, n - 1);
    };
    // log();
    int q;
    cin >> q;
    while (q--) {
        int t, l, r, val;
        cin >> t >> l >> r;
        if (t == 1) {
            cin >> val;
            update(l - 1, r - 1, val, 0, n - 1);
        } else {
            cout << query(l - 1, r - 1, 0, n - 1) << nl;
        };
        // log();
    };
    /////////////////
    return 0;
};
/*
000000000000000000000000000000000000000000011111111100000000000000000000000000000000000000
0000000000000000000000000000000000001111.............1111111000000000000000000000000000000
00000000000000000000000000000000011.. .....11111111.........111000000000000000000000000000
000000000000000000000000000000011.  .1111111111111111111111.. .110000000000000000000000000
0000000000000000000000000000001. ..111111111111111111111111111. .1100000000000000000000000
000000000000000000000000000001. .111111111111111111111111111111. .110000000000000000000000
00000000000000000000000000001. .111111.............11111111111111. .1000000000000000000000
00000000000000000000000000001  111.   ..............   ...11111111. .100000000000000000000
0000000000000000000000000001. .11.  ..11111111111111111..  .1111111. .10000000000000000000
0000000000000000000000000001  111. ..11111111111111111111.  .1111111. .1000000000000000000
000000000000000000000000001. .111.  ..1111111111111111111.. .11111111. .100000000000000000
000000000000000000000000001. 11111.   ...11111111111111...  .11111111. .100000000000000000
000000000000000000000000011 .1111111..   ..............   .11111111111. 110000000000000000
00000000000000000000000001. .1111111111.................11111111111111. .10000000000000000
00000000000000000000000001 .1111111111111111111111111111111111111111111  10000000000000000
0000000000000000000000001. .1111111111111111111111111111111111111111111. .1000000000000000
0000000000000000000000001. 11111111111111111111111111111111111111111111. .1000000000000000
000000000000000000000001. .11111111111111111111111111111111111111111111. .1000000000000000
000000000000000000000001. .111111111111111111111111111111111111111111111 .1000000000000000
000000000000000000000011 .1111111111111111111111111111111111111111111111 .1000000000000000
00000000000000000000001. .1111111111111111111111111111111111111111111111. 1000000000000000
00000000000000000000001. 11111111111111111111111111111111111111111111111. 1000000000000000
0000000000000000000001. .11111111111111111111111111111111111111111111111. 1100000000000000
0000000000000000000001. .11111111111111111111111111111111111111111111111. 1100000000000000
0000000000000000000011 .111111111111111111111111111111111111111111111111. 1100000000000000
000000000000000000001. .111111111111111111111111111111111111111111111111. 1100000000000000
000000000000000000001 .1111111111111111111111111111111111111111111111111  1000000000000000
00000000000000000001. .1111111111111111111111111111111111111111111111111 .1000000000000000
00000000000000000001. 11111111111111111111.........11111111111111111111. .1000000000000000
0000000000000000001. .111111111111................... .1111111111111111. .1000000000000000
0000000000000000001. .111111111....111111111111111111. .111111111111111. .1000000000000000
0000000000000000011 .111111111. .100000000000000000001  111111111111111. .1000000000000000
000000111111111111. .111111111. .100000000000000000001  111111111111111. .1000000000000000
00111...............11111111111 .100000000000000000001 .111111111111111. .1000000000000000
001. ..111111111111111111111111. 110000000000000000001  111111111111111. .1000000000000000
001. 11111111111111111111111111. .10000000000000000001  111111111111111. .1000000000000000
001. .1111111111111111111111111. .10000000000000000001 .111111111111111. .1000000000000000
00011. ..11111111111111111111..  .1000000000111111111. .111111111111111 .10000000000000000
0000011.. ................. ...11100000111........... ..11111111111111. .10000000000000000
0000000111111...........111111000000011. ...11111111111111111111111111  110000000000000000
00000000000000000000000000000000000001. .111111111111111111111111111.  .100000000000000000
000000000000000000000000000000000000011. .11111111111111111111111.. ..11000000000000000000
00000000000000000000000000000000000000111.. ......111111111.... ...11000000000000000000000
00000000000000000000000000000000000000000111111...............1111000000000000000000000000
000000000000000000000000000000000000000000000000011111111111100000000000000000000000000000
*/